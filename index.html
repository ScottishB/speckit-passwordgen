<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'wasm-unsafe-eval'; style-src 'self' 'unsafe-inline'; connect-src 'self';">
  <title>Password Generator</title>
  <link rel="stylesheet" href="./src/styles/main.css">
  <link rel="stylesheet" href="./src/styles/forms.css">
  <link rel="stylesheet" href="./src/styles/history.css">
  <link rel="stylesheet" href="./src/styles/auth.css">
</head>
<body>
  <div id="app">
    <header>
      <h1>Password Generator</h1>
      <p class="subtitle">Create secure passwords and passphrases</p>
    </header>

    <main>
      <!-- Tab Navigation -->
      <nav class="tab-nav" role="tablist" aria-label="Generation type">
        <button 
          id="password-tab-btn" 
          class="tab-button active" 
          role="tab" 
          aria-selected="true" 
          aria-controls="password-panel"
          tabindex="0">
          Password
        </button>
        <button 
          id="passphrase-tab-btn" 
          class="tab-button" 
          role="tab" 
          aria-selected="false" 
          aria-controls="passphrase-panel"
          tabindex="-1">
          Passphrase
        </button>
      </nav>

      <!-- Password Tab Panel -->
      <section 
        id="password-panel" 
        class="tab-panel active" 
        role="tabpanel" 
        aria-labelledby="password-tab-btn"
        tabindex="0">
        <form id="password-form" class="generator-form">
          <div class="form-group">
            <label for="password-length">
              Length: <span id="password-length-value">12</span> characters
            </label>
            <input 
              type="range" 
              id="password-length" 
              name="length" 
              min="8" 
              max="128" 
              value="12"
              aria-valuemin="8"
              aria-valuemax="128"
              aria-valuenow="12"
              aria-label="Password length slider">
          </div>

          <fieldset class="checkbox-group">
            <legend>Character Types</legend>
            <div class="checkbox-item">
              <input 
                type="checkbox" 
                id="password-uppercase" 
                name="includeUppercase" 
                checked
                aria-label="Include uppercase letters">
              <label for="password-uppercase">Uppercase (A-Z)</label>
            </div>
            <div class="checkbox-item">
              <input 
                type="checkbox" 
                id="password-lowercase" 
                name="includeLowercase" 
                checked
                aria-label="Include lowercase letters">
              <label for="password-lowercase">Lowercase (a-z)</label>
            </div>
            <div class="checkbox-item">
              <input 
                type="checkbox" 
                id="password-numbers" 
                name="includeNumbers" 
                checked
                aria-label="Include numbers">
              <label for="password-numbers">Numbers (0-9)</label>
            </div>
            <div class="checkbox-item">
              <input 
                type="checkbox" 
                id="password-special" 
                name="includeSpecialChars"
                aria-label="Include special characters">
              <label for="password-special">Special Characters (!@#$...)</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="password-min-numbers">
              Minimum Numbers: <span id="password-min-numbers-value">1</span>
            </label>
            <input 
              type="range" 
              id="password-min-numbers" 
              name="minNumbers" 
              min="0" 
              max="20" 
              value="1"
              aria-valuemin="0"
              aria-valuemax="20"
              aria-valuenow="1"
              aria-label="Minimum numbers slider">
          </div>

          <div class="form-group">
            <label for="password-min-special">
              Minimum Special Characters: <span id="password-min-special-value">1</span>
            </label>
            <input 
              type="range" 
              id="password-min-special" 
              name="minSpecialChars" 
              min="0" 
              max="20" 
              value="1"
              aria-valuemin="0"
              aria-valuemax="20"
              aria-valuenow="1"
              aria-label="Minimum special characters slider">
          </div>

          <div class="validation-errors" id="password-errors" role="alert" aria-live="polite"></div>

          <div class="button-group">
            <button type="button" id="password-generate-btn" class="btn btn-primary">
              Generate Password
            </button>
            <button type="button" id="password-reset-btn" class="btn btn-secondary">
              Reset
            </button>
          </div>
        </form>

        <div class="result-container">
          <div class="result-display" id="password-result" aria-live="polite" aria-atomic="true">
            <span class="result-placeholder">Click "Generate Password" to create a password</span>
          </div>
          <div class="result-actions">
            <button 
              type="button" 
              id="password-copy-btn" 
              class="btn btn-copy" 
              disabled
              aria-label="Copy password to clipboard">
              Copy
            </button>
            <button 
              type="button" 
              id="password-assign-btn" 
              class="btn btn-primary" 
              disabled
              aria-label="Assign password to a site"
              style="display: none;">
              Assign to Site
            </button>
          </div>
        </div>
        <div class="copy-feedback" id="password-copy-feedback" role="status" aria-live="polite"></div>
      </section>

      <!-- Passphrase Tab Panel -->
      <section 
        id="passphrase-panel" 
        class="tab-panel" 
        role="tabpanel" 
        aria-labelledby="passphrase-tab-btn"
        tabindex="0"
        hidden>
        <form id="passphrase-form" class="generator-form">
          <div class="form-group">
            <label for="passphrase-words">
              Word Count: <span id="passphrase-words-value">3</span> words
            </label>
            <input 
              type="range" 
              id="passphrase-words" 
              name="wordCount" 
              min="3" 
              max="8" 
              value="3"
              aria-valuemin="3"
              aria-valuemax="8"
              aria-valuenow="3"
              aria-label="Word count slider">
          </div>

          <fieldset class="checkbox-group">
            <legend>Options</legend>
            <div class="checkbox-item">
              <input 
                type="checkbox" 
                id="passphrase-uppercase" 
                name="includeUppercase"
                aria-label="Capitalize first letter of each word">
              <label for="passphrase-uppercase">Uppercase First Letter</label>
            </div>
            <div class="checkbox-item">
              <input 
                type="checkbox" 
                id="passphrase-numbers" 
                name="includeNumbers"
                aria-label="Append random numbers to words">
              <label for="passphrase-numbers">Append Numbers</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="passphrase-separator">
              Separator Character
            </label>
            <input 
              type="text" 
              id="passphrase-separator" 
              name="separator" 
              value="-" 
              maxlength="10"
              aria-label="Separator character"
              aria-describedby="separator-help">
            <small id="separator-help" class="help-text">Character(s) to join words (max 10 characters)</small>
          </div>

          <div class="validation-errors" id="passphrase-errors" role="alert" aria-live="polite"></div>

          <div class="button-group">
            <button type="button" id="passphrase-generate-btn" class="btn btn-primary">
              Generate Passphrase
            </button>
            <button type="button" id="passphrase-reset-btn" class="btn btn-secondary">
              Reset
            </button>
          </div>
        </form>

        <div class="result-container">
          <div class="result-display" id="passphrase-result" aria-live="polite" aria-atomic="true">
            <span class="result-placeholder">Click "Generate Passphrase" to create a passphrase</span>
          </div>
          <div class="result-actions">
            <button 
              type="button" 
              id="passphrase-copy-btn" 
              class="btn btn-copy" 
              disabled
              aria-label="Copy passphrase to clipboard">
              Copy
            </button>
            <button 
              type="button" 
              id="passphrase-assign-btn" 
              class="btn btn-primary" 
              disabled
              aria-label="Assign passphrase to a site"
              style="display: none;">
              Assign to Site
            </button>
          </div>
        </div>
        <div class="copy-feedback" id="passphrase-copy-feedback" role="status" aria-live="polite"></div>
      </section>

      <!-- History Section -->
      <section class="history-section" aria-labelledby="history-heading">
        <h2 id="history-heading">Generation History</h2>
        <div class="history-controls">
          <button type="button" id="history-filter-all" class="filter-btn active">All</button>
          <button type="button" id="history-filter-password" class="filter-btn">Passwords</button>
          <button type="button" id="history-filter-passphrase" class="filter-btn">Passphrases</button>
        </div>
        <div 
          id="history-list" 
          class="history-list" 
          role="list" 
          aria-label="Generation history items">
          <p class="history-empty">No history yet. Generate a password or passphrase to get started.</p>
        </div>
      </section>
    </main>

    <div id="loading-overlay" class="loading-overlay" hidden>
      <div class="spinner" role="status" aria-live="polite">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </div>

  <script type="module" src="./src/main.ts"></script>
</body>
</html>
